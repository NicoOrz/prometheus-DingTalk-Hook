apiVersion: v1
kind: Secret
metadata:
  name: prometheus-dingtalk-hook-config
type: Opaque
stringData:
  config.yaml: |
    server:
      listen: "0.0.0.0:9098"
      path: "/alert"

    auth:
      token: ""

    template:
      dir: "/etc/prometheus-dingtalk-hook/templates"

    admin:
      enabled: false
      path_prefix: "/admin"
      basic_auth:
        username: "admin"
        password: "change-me"

    reload:
      enabled: false
      interval: 2s

    dingtalk:
      timeout: 5s
      robots:
        - name: "default"
          webhook: "https://oapi.dingtalk.com/robot/send?access_token=YOUR_ACCESS_TOKEN"
          secret: ""
          msg_type: "markdown"
          title: ""

      channels:
        - name: "default"
          robots: ["default"]
          template: "default"
          mention:
            at_all: false
            at_mobiles: []
            at_user_ids: []
          mention_rules:
            - name: "critical->@all"
              when:
                labels:
                  severity: ["critical"]
              mention:
                at_all: true

      routes: []
